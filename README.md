# cubesat-db

[![stability](https://img.shields.io/badge/stability-experimental-orange.svg?style=flat-square)](https://nodejs.org/api/documentation.html#documentation_stability_index)
[![js-standard-style](https://img.shields.io/badge/code%20style-standard-brightgreen.svg?style=flat-square)](https://github.com/feross/standard)

<!-- [![npm version](https://img.shields.io/npm/v/@garbados/cubesat-db.svg?style=flat-square)](https://www.npmjs.com/package/cubesat-db) -->

<!-- [![build status](https://img.shields.io/travis/garbados/cubesat-db/master.svg?style=flat-square)](https://travis-ci.org/garbados/cubesat-db) -->

<!-- [![test coverage](https://img.shields.io/coveralls/github/garbados/cubesat-db/master.svg?style=flat-square)](https://coveralls.io/github/garbados/cubesat-db) -->

<!-- [![greenkeeper](https://badges.greenkeeper.io/garbados/cubesat-db.svg)](https://greenkeeper.io/) -->

[pouchdb]: https://pouchdb.com/

[orbitdb]: https://github.com/orbitdb/orbit-db

[ipfs-log]: https://github.com/orbitdb/ipfs-log

A small connector for big things.

CubeSatDB uses [PouchDB][pouchdb] and the [ipfs-log][ipfs-log] module from [OrbitDB][orbitdb] to store, index, and replicate documents between peers over IPFS _and_ CouchDB.

Feature Goals:

-   [x] Use PouchDB to provide Mango and Map/Reduce indexers over an append-only log.
-   [x] Join CubeSatDBs together, merging their histories.
-   [ ] Import a remote CouchDB database into IPFS blocks via replication.
-   [ ] Start a CubeSatDB with a multihash to sync with a remote log, or merge individual sets of rows via multihashes.

## Install

Install CubeSatDB using [npm](http://npmjs.com/):

```bash
$ npm install -S cubesat-db
```

## Usage

TODO usage examples

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

-   [CubeSatDB](#cubesatdb)
    -   [validate](#validate)
    -   [join](#join)
    -   [put](#put)
    -   [post](#post)
    -   [get](#get)
    -   [all](#all)
    -   [del](#del)
    -   [find](#find)
    -   [query](#query)
    -   [pouch](#pouch)
    -   [log](#log)
    -   [ipfs](#ipfs)
    -   [Error](#error)

### CubeSatDB

**Parameters**

-   `name` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** A name, URL (of a CouchDB instance), or multihash (of an IPFS log)
-   `options` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** An object of settings and configuration values. (optional, default `{}`)
    -   `options.ipfs` **(IPFS | [Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object))** [description]
    -   `options.pouch` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** [description]
    -   `options._IpfsLog` **IpfsLog** [description]
    -   `options._IPFS` **IPFS** [description]
    -   `options._PouchDB` **PouchDB** [description]

#### validate

A document validator. It makes sure a document is
an object but not an array.
Subclasses can extend this method to enforce a schema.

**Parameters**

-   `doc` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** A document.


-   Throws **CubeError** An error about the document.

#### join

Merges another CubeSat or IpfsLog into this one.

**Parameters**

-   `log` **(IpfsLog | [CubeSatDB](#cubesatdb))** An instance of IpfsLog or CubeSat.

#### put

[put description]

**Parameters**

-   `doc` **\[type]** [description]

Returns **\[type]** [description]

#### post

[post description]

**Parameters**

-   `doc` **\[type]** [description]

Returns **\[type]** [description]

#### get

[get description]

Returns **\[type]** [description]

#### all

[all description]

**Parameters**

-   `options`   (optional, default `{}`)

Returns **\[type]** [description]

#### del

[del description]

**Parameters**

-   `$0` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** 
    -   `$0._id`  
    -   `$0._rev`  
-   `options` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** [description] (optional, default `{}`)

#### find

[find description]

Returns **\[type]** [description]

#### query

[query description]

Returns **\[type]** [description]

#### pouch

[pouch description]

Returns **PouchDB** The CubeSat instance's instance of PouchDB.

#### log

[log description]

Returns **IpfsLog** The CubeSat instance's instance of IpfsLog.

#### ipfs

[ipfs description]

Returns **IPFS** The CubeSat instance's instance of an IPFS node.

#### Error

A subclass of Error for describing cube-related problems.

Returns **CubeError** 

## Development

Get the source with [git](http://git-scm.org/):

```bash
git clone https://github.com/garbados/cubesat-db
cd cubesat-db
npm i
npm test
```

## Contributions

TODO

## License

[Apache-2.0](https://www.apache.org/licenses/LICENSE-2.0)
